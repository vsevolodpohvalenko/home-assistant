(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[9649],{86876:(t,e,r)=>{"use strict";r.d(e,{wQ:()=>dt,xi:()=>ft,at:()=>ut});var n=r(77885),i=r(23414),s=r(19753),o=r(64928),a=r(26856);const l=s.tk.baseTheme({".cm-matchingBracket":{color:"#0b0"},".cm-nonmatchingBracket":{color:"#a22"}}),h="()[]{}",c=n.r$.define({combine:t=>(0,n.BO)(t,{afterCursor:!0,brackets:h,maxScanDistance:1e4})}),u=s.p.mark({class:"cm-matchingBracket"}),f=s.p.mark({class:"cm-nonmatchingBracket"});n.QQ.define({create:()=>s.p.none,update(t,e){if(!e.docChanged&&!e.selection)return t;let r=[],n=e.state.facet(c);for(let t of e.state.selection.ranges){if(!t.empty)continue;let i=p(e.state,t.head,-1,n)||t.head>0&&p(e.state,t.head-1,1,n)||n.afterCursor&&(p(e.state,t.head,1,n)||t.head<e.state.doc.length&&p(e.state,t.head+1,-1,n));if(!i)continue;let s=i.matched?u:f;r.push(s.range(i.start.from,i.start.to)),i.end&&r.push(s.range(i.end.from,i.end.to))}return s.p.set(r,!0)},provide:t=>s.tk.decorations.from(t)});function d(t,e,r){let n=t.prop(e<0?a.md.openedBy:a.md.closedBy);if(n)return n;if(1==t.name.length){let n=r.indexOf(t.name);if(n>-1&&n%2==(e<0?1:0))return[r[n+e]]}return null}function p(t,e,r,n={}){let i,s=n.maxScanDistance||1e4,a=n.brackets||h,l=(0,o.qz)(t),c=l.resolve(e,r);return(i=d(c.type,r,a))?function(t,e,r,n,i,s){let o=n.parent,a={from:n.from,to:n.to},l=0,h=null==o?void 0:o.cursor;if(h&&(r<0?h.childBefore(n.from):h.childAfter(n.to)))do{if(r<0?h.to<=n.from:h.from>=n.to){if(0==l&&i.indexOf(h.type.name)>-1)return{start:a,end:{from:h.from,to:h.to},matched:!0};if(d(h.type,r,s))l++;else if(d(h.type,-r,s)&&(l--,0==l))return{start:a,end:{from:h.from,to:h.to},matched:!1}}}while(r<0?h.prevSibling():h.nextSibling());return{start:a,matched:!1}}(0,0,r,c,i,a):function(t,e,r,n,i,s,o){let a=r<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),l=o.indexOf(a);if(l<0||l%2==0!=r>0)return null;let h={from:r<0?e-1:e,to:r>0?e+1:e},c=t.doc.iterRange(e,r>0?t.doc.length:0),u=0;for(let t=0;!c.next().done&&t<=s;){let s=c.value;r<0&&(t+=s.length);let a=e+t*r;for(let t=r>0?0:s.length-1,e=r>0?s.length:-1;t!=e;t+=r){let e=o.indexOf(s[t]);if(!(e<0||n.resolve(a+t,1).type!=i))if(e%2==0==r>0)u++;else{if(1==u)return{start:h,end:{from:a+t,to:a+t+1},matched:e>>1==l>>1};u--}}r>0&&(t+=s.length)}return c.done?{start:h,matched:!1}:null}(t,e,r,l,c.type,s,a)}function m(t,e){return n.jT.create(t.ranges.map(e),t.mainIndex)}function g(t,e){return t.update({selection:e,scrollIntoView:!0,annotations:n.YW.userEvent.of("keyboardselection")})}function y({state:t,dispatch:e},r){let n=m(t.selection,r);return!n.eq(t.selection)&&(e(g(t,n)),!0)}function b(t,e){return n.jT.cursor(e?t.to:t.from)}function v(t,e){return y(t,(r=>r.empty?t.moveByChar(r,e):b(r,e)))}const k=t=>v(t,t.textDirection!=s.Nm.LTR),x=t=>v(t,t.textDirection==s.Nm.LTR);function w(t,e){return y(t,(r=>r.empty?t.moveByGroup(r,e):b(r,e)))}function C(t,e,r){if(e.type.prop(r))return!0;let n=e.to-e.from;return n&&(n>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function S(t,e,r){let i,s,l=(0,o.qz)(t).resolve(e.head),h=r?a.md.closedBy:a.md.openedBy;for(let n=e.head;;){let e=r?l.childAfter(n):l.childBefore(n);if(!e)break;C(t,e,h)?l=e:n=r?e.to:e.from}return s=l.type.prop(h)&&(i=r?p(t,l.from,1):p(t,l.to,-1))&&i.matched?r?i.end.to:i.end.from:r?l.to:l.from,n.jT.cursor(s,r?-1:1)}function A(t,e){return y(t,(r=>r.empty?t.moveVertically(r,e):b(r,e)))}const M=t=>A(t,!1),T=t=>A(t,!0);function D(t,e){return y(t,(r=>r.empty?t.moveVertically(r,e,t.dom.clientHeight):b(r,e)))}const N=t=>D(t,!1),L=t=>D(t,!0);function P(t,e,r){let i=t.visualLineAt(e.head),s=t.moveToLineBoundary(e,r);if(s.head==e.head&&s.head!=(r?i.to:i.from)&&(s=t.moveToLineBoundary(e,r,!1)),!r&&s.head==i.from&&i.length){let r=/^\s*/.exec(t.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;r&&e.head!=i.from+r&&(s=n.jT.cursor(i.from+r))}return s}const B=t=>y(t,(e=>P(t,e,!0))),O=t=>y(t,(e=>P(t,e,!1)));function j(t,e,r){let i=!1,s=m(t.selection,(e=>{let s=p(t,e.head,-1)||p(t,e.head,1)||e.head>0&&p(t,e.head-1,1)||e.head<t.doc.length&&p(t,e.head+1,-1);if(!s||!s.end)return e;i=!0;let o=s.start.from==e.head?s.end.to:s.end.from;return r?n.jT.range(e.anchor,o):n.jT.cursor(o)}));return!!i&&(e(g(t,s)),!0)}function R(t,e){let r=m(t.state.selection,(t=>{let r=e(t);return n.jT.range(t.anchor,r.head,r.goalColumn)}));return!r.eq(t.state.selection)&&(t.dispatch(g(t.state,r)),!0)}function E(t,e){return R(t,(r=>t.moveByChar(r,e)))}const q=t=>E(t,t.textDirection!=s.Nm.LTR),I=t=>E(t,t.textDirection==s.Nm.LTR);function z(t,e){return R(t,(r=>t.moveByGroup(r,e)))}function _(t,e){return R(t,(r=>t.moveVertically(r,e)))}const W=t=>_(t,!1),$=t=>_(t,!0);function V(t,e){return R(t,(r=>t.moveVertically(r,e,t.dom.clientHeight)))}const U=t=>V(t,!1),G=t=>V(t,!0),H=t=>R(t,(e=>P(t,e,!0))),Q=t=>R(t,(e=>P(t,e,!1))),F=({state:t,dispatch:e})=>(e(g(t,{anchor:0})),!0),J=({state:t,dispatch:e})=>(e(g(t,{anchor:t.doc.length})),!0),K=({state:t,dispatch:e})=>(e(g(t,{anchor:t.selection.main.anchor,head:0})),!0),X=({state:t,dispatch:e})=>(e(g(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0);function Y({state:t,dispatch:e},r){let i=t.changeByRange((t=>{let{from:e,to:i}=t;if(e==i){let t=r(e);e=Math.min(e,t),i=Math.max(i,t)}return e==i?{range:t}:{changes:{from:e,to:i},range:n.jT.cursor(e)}}));return!i.changes.empty&&(e(t.update(i,{scrollIntoView:!0,annotations:n.YW.userEvent.of("delete")})),!0)}const Z=(t,e,r)=>Y(t,(n=>{let s,a,{state:l}=t,h=l.doc.lineAt(n);if(!e&&n>h.from&&n<h.from+200&&!/[^ \t]/.test(s=h.text.slice(0,n-h.from))){if("\t"==s[s.length-1])return n-1;let t=(0,i.IS)(s,0,l.tabSize)%(0,o.y1)(l)||(0,o.y1)(l);for(let e=0;e<t&&" "==s[s.length-1-e];e++)n--;return n}if(r){let t=h.text.slice(n-h.from+(e?0:-2),n-h.from+(e?2:0)),r=t?(0,i.nZ)((0,i.gm)(t,0)):1;a=e?Math.min(l.doc.length,n+r):Math.max(0,n-r)}else a=(0,i.cp)(h.text,n-h.from,e)+h.from;return a==n&&h.number!=(e?l.doc.lines:1)&&(a+=e?1:-1),a})),tt=t=>Z(t,!1,!0),et=t=>Z(t,!0,!1),rt=(t,e)=>Y(t,(r=>{let n=r,{state:s}=t,o=s.doc.lineAt(n),a=s.charCategorizer(n);for(let t=null;;){if(n==(e?o.to:o.from)){n==r&&o.number!=(e?s.doc.lines:1)&&(n+=e?1:-1);break}let l=(0,i.cp)(o.text,n-o.from,e)+o.from,h=o.text.slice(Math.min(n,l)-o.from,Math.max(n,l)-o.from),c=a(h);if(null!=t&&c!=t)break;" "==h&&n==r||(t=c),n=l}return n})),nt=t=>rt(t,!1),it=t=>rt(t,!0),st=t=>Y(t,(e=>{let r=t.visualLineAt(e).to;return e<r?r:Math.min(t.state.doc.length,e+1)}));function ot(t){let e=[],r=-1;for(let n of t.selection.ranges){let i=t.doc.lineAt(n.from),s=t.doc.lineAt(n.to);if(n.empty||n.to!=s.from||(s=t.doc.lineAt(n.to-1)),r>=i.number){let t=e[e.length-1];t.to=s.to,t.ranges.push(n)}else e.push({from:i.from,to:s.to,ranges:[n]});r=s.number+1}return e}function at(t,e,r){let i=[],s=[];for(let e of ot(t)){if(r?e.to==t.doc.length:0==e.from)continue;let o=t.doc.lineAt(r?e.to+1:e.from-1),a=o.length+1;if(r){i.push({from:e.to,to:o.to},{from:e.from,insert:o.text+t.lineBreak});for(let r of e.ranges)s.push(n.jT.range(Math.min(t.doc.length,r.anchor+a),Math.min(t.doc.length,r.head+a)))}else{i.push({from:o.from,to:e.from},{from:e.to,insert:t.lineBreak+o.text});for(let t of e.ranges)s.push(n.jT.range(t.anchor-a,t.head-a))}}return!!i.length&&(e(t.update({changes:i,scrollIntoView:!0,selection:n.jT.create(s,t.selection.mainIndex)})),!0)}function lt(t,e,r){let n=[];for(let e of ot(t))r?n.push({from:e.from,insert:t.doc.slice(e.from,e.to)+t.lineBreak}):n.push({from:e.to,insert:t.lineBreak+t.doc.slice(e.from,e.to)});return e(t.update({changes:n,scrollIntoView:!0})),!0}function ht(t,e){let r=-1;return t.changeByRange((i=>{let s=[];for(let n=i.from;n<=i.to;){let o=t.doc.lineAt(n);o.number>r&&(i.empty||i.to>o.from)&&(e(o,s,i),r=o.number),n=o.to+1}let o=t.changes(s);return{changes:s,range:n.jT.range(o.mapPos(i.anchor,1),o.mapPos(i.head,1))}}))}const ct=({state:t,dispatch:e})=>{let r=Object.create(null),n=new o.Gn(t,{overrideIndentation:t=>{let e=r[t];return null==e?-1:e}}),i=ht(t,((e,i,s)=>{let a=(0,o.K0)(n,e.from);if(null==a)return;let l=/^\s*/.exec(e.text)[0],h=(0,o.SS)(t,a);(l!=h||s.from<e.from+l.length)&&(r[e.from]=a,i.push({from:e.from,to:e.from+l.length,insert:h}))}));return i.changes.empty||e(t.update(i)),!0},ut=({state:t,dispatch:e})=>(e(t.update(ht(t,((e,r)=>{r.push({from:e.from,insert:t.facet(o.c)})})))),!0),ft=({state:t,dispatch:e})=>(e(t.update(ht(t,((e,r)=>{let n=/^\s*/.exec(e.text)[0];if(!n)return;let s=(0,i.IS)(n,0,t.tabSize),a=0,l=(0,o.SS)(t,Math.max(0,s-(0,o.y1)(t)));for(;a<n.length&&a<l.length&&n.charCodeAt(a)==l.charCodeAt(a);)a++;r.push({from:e.from+a,to:e.from+n.length,insert:l.slice(a)})})))),!0),dt=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:t=>y(t,(e=>S(t.state,e,t.textDirection!=s.Nm.LTR))),shift:t=>R(t,(e=>S(t.state,e,t.textDirection!=s.Nm.LTR)))},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:t=>y(t,(e=>S(t.state,e,t.textDirection==s.Nm.LTR))),shift:t=>R(t,(e=>S(t.state,e,t.textDirection==s.Nm.LTR)))},{key:"Alt-ArrowUp",run:({state:t,dispatch:e})=>at(t,e,!1)},{key:"Shift-Alt-ArrowUp",run:({state:t,dispatch:e})=>lt(t,e,!1)},{key:"Alt-ArrowDown",run:({state:t,dispatch:e})=>at(t,e,!0)},{key:"Shift-Alt-ArrowDown",run:({state:t,dispatch:e})=>lt(t,e,!0)},{key:"Escape",run:({state:t,dispatch:e})=>{let r=t.selection,i=null;return r.ranges.length>1?i=n.jT.create([r.main]):r.main.empty||(i=n.jT.create([n.jT.cursor(r.main.head)])),!!i&&(e(g(t,i)),!0)}},{key:"Alt-l",mac:"Ctrl-l",run:({state:t,dispatch:e})=>{let r=ot(t).map((({from:e,to:r})=>n.jT.range(e,Math.min(r+1,t.doc.length))));return e(t.update({selection:n.jT.create(r),annotations:n.YW.userEvent.of("keyboardselection")})),!0}},{key:"Mod-i",run:({state:t,dispatch:e})=>{let r=m(t.selection,(e=>{var r;let i=(0,o.qz)(t).resolve(e.head,1);for(;!(i.from<e.from&&i.to>=e.to||i.to>e.to&&i.from<=e.from)&&(null===(r=i.parent)||void 0===r?void 0:r.parent);)i=i.parent;return n.jT.range(i.to,i.from)}));return e(g(t,r)),!0},preventDefault:!0},{key:"Mod-[",run:ft},{key:"Mod-]",run:ut},{key:"Mod-Alt-\\",run:ct},{key:"Shift-Mod-k",run:t=>{let{state:e}=t,r=e.changes(ot(e).map((({from:t,to:r})=>(t>0?t--:r<e.doc.length&&r++,{from:t,to:r})))),n=m(e.selection,(e=>t.moveVertically(e,!0))).map(r);return t.dispatch({changes:r,selection:n,scrollIntoView:!0}),!0}},{key:"Shift-Mod-\\",run:({state:t,dispatch:e})=>j(t,e,!1)}].concat([{key:"ArrowLeft",run:k,shift:q,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:t=>w(t,t.textDirection!=s.Nm.LTR),shift:t=>z(t,t.textDirection!=s.Nm.LTR)},{mac:"Cmd-ArrowLeft",run:O,shift:Q},{key:"ArrowRight",run:x,shift:I,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:t=>w(t,t.textDirection==s.Nm.LTR),shift:t=>z(t,t.textDirection==s.Nm.LTR)},{mac:"Cmd-ArrowRight",run:B,shift:H},{key:"ArrowUp",run:M,shift:W,preventDefault:!0},{mac:"Cmd-ArrowUp",run:F,shift:K},{mac:"Ctrl-ArrowUp",run:N,shift:U},{key:"ArrowDown",run:T,shift:$,preventDefault:!0},{mac:"Cmd-ArrowDown",run:J,shift:X},{mac:"Ctrl-ArrowDown",run:L,shift:G},{key:"PageUp",run:N,shift:U},{key:"PageDown",run:L,shift:G},{key:"Home",run:O,shift:Q},{key:"Mod-Home",run:F,shift:K},{key:"End",run:B,shift:H},{key:"Mod-End",run:J,shift:X},{key:"Enter",run:({state:t,dispatch:e})=>{let r=t.changeByRange((({from:e,to:r})=>{let s=e==r&&function(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let r,n=(0,o.qz)(t).resolve(e),i=n.childBefore(e),s=n.childAfter(e);return i&&s&&i.to<=e&&s.from>=e&&(r=i.type.prop(a.md.closedBy))&&r.indexOf(s.name)>-1&&t.doc.lineAt(i.to).from==t.doc.lineAt(s.from).from?{from:i.to,to:s.from}:null}(t,e),l=new o.Gn(t,{simulateBreak:e,simulateDoubleBreak:!!s}),h=(0,o.K0)(l,e);null==h&&(h=/^\s*/.exec(t.doc.lineAt(e).text)[0].length);let c=t.doc.lineAt(e);for(;r<c.to&&/\s/.test(c.text.slice(r-c.from,r+1-c.from));)r++;s?({from:e,to:r}=s):e>c.from&&e<c.from+100&&!/\S/.test(c.text.slice(0,e))&&(e=c.from);let u=["",(0,o.SS)(t,h)];return s&&u.push((0,o.SS)(t,l.lineIndent(c))),{changes:{from:e,to:r,insert:i.xv.of(u)},range:n.jT.cursor(e+1+u[1].length)}}));return e(t.update(r,{scrollIntoView:!0})),!0}},{key:"Mod-a",run:({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},annotations:n.YW.userEvent.of("keyboardselection")})),!0)},{key:"Backspace",run:tt,shift:tt},{key:"Delete",run:et,shift:et},{key:"Mod-Backspace",mac:"Alt-Backspace",run:nt},{key:"Mod-Delete",mac:"Alt-Delete",run:it},{mac:"Mod-Backspace",run:t=>Y(t,(e=>{let r=t.visualLineAt(e).from;return e>r?r:Math.max(0,e-1)}))},{mac:"Mod-Delete",run:st}].concat([{key:"Ctrl-b",run:k,shift:q,preventDefault:!0},{key:"Ctrl-f",run:x,shift:I},{key:"Ctrl-p",run:M,shift:W},{key:"Ctrl-n",run:T,shift:$},{key:"Ctrl-a",run:t=>y(t,(e=>n.jT.cursor(t.visualLineAt(e.head).from,1))),shift:t=>R(t,(e=>n.jT.cursor(t.visualLineAt(e.head).from)))},{key:"Ctrl-e",run:t=>y(t,(e=>n.jT.cursor(t.visualLineAt(e.head).to,-1))),shift:t=>R(t,(e=>n.jT.cursor(t.visualLineAt(e.head).to)))},{key:"Ctrl-d",run:et},{key:"Ctrl-h",run:t=>Z(t,!1,!1)},{key:"Ctrl-k",run:st},{key:"Alt-d",run:it},{key:"Ctrl-Alt-h",run:nt},{key:"Ctrl-o",run:({state:t,dispatch:e})=>{let r=t.changeByRange((t=>({changes:{from:t.from,to:t.to,insert:i.xv.of(["",""])},range:n.jT.cursor(t.from)})));return e(t.update(r,{scrollIntoView:!0,annotations:n.YW.userEvent.of("input")})),!0}},{key:"Ctrl-t",run:({state:t,dispatch:e})=>{let r=t.changeByRange((e=>{if(!e.empty||0==e.from||e.from==t.doc.length)return{range:e};let r=e.from,s=t.doc.lineAt(r),o=r==s.from?r-1:(0,i.cp)(s.text,r-s.from,!1)+s.from,a=r==s.to?r+1:(0,i.cp)(s.text,r-s.from,!0)+s.from;return{changes:{from:o,to:a,insert:t.doc.slice(r,a).append(t.doc.slice(o,r))},range:n.jT.cursor(a)}}));return!r.changes.empty&&(e(t.update(r,{scrollIntoView:!0})),!0)}},{key:"Alt-f",run:t=>w(t,!0),shift:t=>z(t,!0)},{key:"Alt-b",run:t=>w(t,!1),shift:t=>z(t,!1)},{key:"Alt-<",run:F},{key:"Alt->",run:J},{key:"Ctrl-v",run:L},{key:"Alt-v",run:N}].map((t=>({mac:t.key,run:t.run,shift:t.shift})))))},15230:(t,e,r)=>{"use strict";r.d(e,{Eu:()=>A});var n=r(19753),i=r(13764),s=r(77885);class o extends i.uU{compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}eq(t){return!1}at(t){return this.range(t)}}o.prototype.elementClass="",o.prototype.toDOM=void 0,o.prototype.mapMode=s.gc.TrackBefore,o.prototype.point=!0;const a=s.r$.define(),l={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>i.Xs.empty,lineMarker:()=>null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},h=s.r$.define();function c(t){return[d(),h.of(Object.assign(Object.assign({},l),t))]}const u=n.tk.baseTheme({".cm-gutters":{display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#999",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",height:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"}}),f=s.r$.define({combine:t=>t.some((t=>t))});function d(t){let e=[p,u];return t&&!1===t.fixed&&e.push(f.of(!0)),e}const p=n.lg.fromClass(class{constructor(t){this.view=t,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.gutters=t.state.facet(h).map((e=>new b(t,e)));for(let t of this.gutters)this.dom.appendChild(t.dom);this.fixed=!t.state.facet(f),this.fixed&&(this.dom.style.position="sticky"),t.scrollDOM.insertBefore(this.dom,t.contentDOM),this.syncGutters()}update(t){this.updateGutters(t)&&this.syncGutters()}syncGutters(){let t=i.Xs.iter(this.view.state.facet(a),this.view.viewport.from),e=[],r=this.gutters.map((t=>new y(t,this.view.viewport)));this.view.viewportLines((i=>{let s;if(Array.isArray(i.type)){for(let t of i.type)if(t.type==n.kH.Text){s=t;break}}else s=i.type==n.kH.Text?i:void 0;if(s){e.length&&(e=[]),g(t,e,i.from);for(let t of r)t.line(this.view,s,e)}}),0);for(let t of r)t.finish();this.dom.style.minHeight=this.view.contentHeight+"px",this.view.state.facet(f)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"")}updateGutters(t){let e=t.startState.facet(h),r=t.state.facet(h),n=t.docChanged||t.heightChanged||t.viewportChanged||!i.Xs.eq(t.startState.facet(a),t.state.facet(a),t.view.viewport.from,t.view.viewport.to);if(e==r)for(let e of this.gutters)e.update(t)&&(n=!0);else{n=!0;let i=[];for(let n of r){let r=e.indexOf(n);r<0?i.push(new b(this.view,n)):(this.gutters[r].update(t),i.push(this.gutters[r]))}for(let t of this.gutters)t.dom.remove();for(let t of i)this.dom.appendChild(t.dom);this.gutters=i}return n}destroy(){this.dom.remove()}},{provide:n.BF.scrollMargins.from((t=>0!=t.gutters.length&&t.fixed?t.view.textDirection==n.Nm.LTR?{left:t.dom.offsetWidth}:{right:t.dom.offsetWidth}:null))});function m(t){return Array.isArray(t)?t:[t]}function g(t,e,r){for(;t.value&&t.from<=r;)t.from==r&&e.push(t.value),t.next()}class y{constructor(t,e){this.gutter=t,this.localMarkers=[],this.i=0,this.height=0,this.cursor=i.Xs.iter(t.markers,e.from)}line(t,e,r){this.localMarkers.length&&(this.localMarkers=[]),g(this.cursor,this.localMarkers,e.from);let n=r.length?this.localMarkers.concat(r):this.localMarkers,i=this.gutter.config.lineMarker(t,e,n);i&&n.unshift(i);let s=this.gutter;if(0==n.length&&!s.config.renderEmptyElements)return;let o=e.top-this.height;if(this.i==s.elements.length){let r=new v(t,e.height,o,n);s.elements.push(r),s.dom.appendChild(r.dom)}else{let r=s.elements[this.i];(function(t,e){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!t[r].compare(e[r]))return!1;return!0})(n,r.markers)&&(n=r.markers),r.update(t,e.height,o,n)}this.height=e.bottom,this.i++}finish(){let t=this.gutter;for(;t.elements.length>this.i;)t.dom.removeChild(t.elements.pop().dom)}}class b{constructor(t,e){this.view=t,this.config=e,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in e.domEventHandlers)this.dom.addEventListener(r,(n=>{let i=t.visualLineAtHeight(n.clientY,t.contentDOM.getBoundingClientRect().top);e.domEventHandlers[r](t,i,n)&&n.preventDefault()}));this.markers=m(e.markers(t)),e.initialSpacer&&(this.spacer=new v(t,0,0,[e.initialSpacer(t)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(t){let e=this.markers;if(this.markers=m(this.config.markers(t.view)),this.spacer&&this.config.updateSpacer){let e=this.config.updateSpacer(this.spacer.markers[0],t);e!=this.spacer.markers[0]&&this.spacer.update(t.view,0,0,[e])}let r=t.view.viewport;return!i.Xs.eq(this.markers,e,r.from,r.to)}}class v{constructor(t,e,r,n){this.height=-1,this.above=0,this.dom=document.createElement("div"),this.update(t,e,r,n)}update(t,e,r,n){if(this.height!=e&&(this.dom.style.height=(this.height=e)+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),this.markers!=n){this.markers=n;for(let t;t=this.dom.lastChild;)t.remove();let e="cm-gutterElement";for(let r of n){r.toDOM&&this.dom.appendChild(r.toDOM(t));let n=r.elementClass;n&&(e+=" "+n)}this.dom.className=e}}}const k=s.r$.define(),x=s.r$.define({combine:t=>(0,s.BO)(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(t,e){let r=Object.assign({},t);for(let t in e){let n=r[t],i=e[t];r[t]=n?(t,e,r)=>n(t,e,r)||i(t,e,r):i}return r}})});class w extends o{constructor(t){super(),this.number=t}eq(t){return this.number==t.number}toDOM(t){return document.createTextNode(this.number)}}function C(t,e){return t.state.facet(x).formatNumber(e,t.state)}const S=c({class:"cm-lineNumbers",markers:t=>t.state.facet(k),lineMarker:(t,e,r)=>r.some((t=>t.toDOM))?null:new w(C(t,t.state.doc.lineAt(e.from).number)),initialSpacer:t=>new w(C(t,M(t.state.doc.lines))),updateSpacer(t,e){let r=C(e.view,M(e.view.state.doc.lines));return r==t.number?t:new w(r)}});function A(t={}){return[x.of(t),S]}function M(t){let e=9;for(;e<t;)e=10*e+9;return e}},49619:(t,e,r)=>{"use strict";r.d(e,{Qf:()=>x,Gv:()=>p,pJ:()=>_});var n=r(26856),i=r(62038),s=r(19753),o=r(77885),a=r(64928),l=r(13764);let h=0;class c{constructor(t,e,r){this.set=t,this.base=e,this.modified=r,this.id=h++}static define(t){if(null==t?void 0:t.base)throw new Error("Can not derive from a modified tag");let e=new c([],null,[]);if(e.set.push(e),t)for(let r of t.set)e.set.push(r);return e}static defineModifier(){let t=new f;return e=>e.modified.indexOf(t)>-1?e:f.get(e.base||e,e.modified.concat(t).sort(((t,e)=>t.id-e.id)))}}let u=0;class f{constructor(){this.instances=[],this.id=u++}static get(t,e){if(!e.length)return t;let r=e[0].instances.find((r=>{return r.base==t&&(n=e,i=r.modified,n.length==i.length&&n.every(((t,e)=>t==i[e])));var n,i}));if(r)return r;let n=[],i=new c(n,t,e);for(let t of e)t.instances.push(i);let s=d(e);for(let e of t.set)for(let t of s)n.push(f.get(e,t));return i}}function d(t){let e=[t];for(let r=0;r<t.length;r++)for(let n of d(t.slice(0,r).concat(t.slice(r+1))))e.push(n);return e}function p(t){let e=Object.create(null);for(let r in t){let n=t[r];Array.isArray(n)||(n=[n]);for(let t of r.split(" "))if(t){let r=[],i=2,s=t;for(let e=0;;){if("..."==s&&e>0&&e+3==t.length){i=1;break}let n=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(s);if(!n)throw new RangeError("Invalid path: "+t);if(r.push("*"==n[0]?null:'"'==n[0][0]?JSON.parse(n[0]):n[0]),e+=n[0].length,e==t.length)break;let o=t[e++];if(e==t.length&&"!"==o){i=0;break}if("/"!=o)throw new RangeError("Invalid path: "+t);s=t.slice(e)}let o=r.length-1,a=r[o];if(!a)throw new RangeError("Invalid path: "+t);let l=new k(n,i,o>0?r.slice(0,o):null);e[a]=l.sort(e[a])}}return m.add(e)}const m=new n.md,g=o.r$.define({combine:t=>t.length?x.combinedMatch(t):null}),y=o.r$.define({combine:t=>t.length?t[0].match:null});function b(){return null}function v(t){return t.facet(g)||t.facet(y)||b}class k{constructor(t,e,r,n){this.tags=t,this.mode=e,this.context=r,this.next=n}sort(t){return!t||t.depth<this.depth?(this.next=t,this):(t.next=this.sort(t.next),t)}get depth(){return this.context?this.context.length:0}}class x{constructor(t,e){let r;function n(t){let e=i.V.newName();return(r||(r=Object.create(null)))["."+e]=t,e}this.map=Object.create(null),this.all="string"==typeof e.all?e.all:e.all?n(e.all):null;for(let e of t){let t=(e.class||n(Object.assign({},e,{tag:null})))+(this.all?" "+this.all:""),r=e.tag;if(Array.isArray(r))for(let e of r)this.map[e.id]=t;else this.map[r.id]=t}this.module=r?new i.V(r):null,this.scope=e.scope||null,this.match=this.match.bind(this);let o=[w];this.module&&o.push(s.tk.styleModule.of(this.module)),this.extension=o.concat(g.of(this)),this.fallback=o.concat(y.of(this))}match(t,e){if(this.scope&&e!=this.scope)return null;for(let e of t.set){let r=this.map[e.id];if(void 0!==r)return e!=t&&(this.map[t.id]=r),r}return this.map[t.id]=this.all}static combinedMatch(t){if(1==t.length)return t[0].match;let e=t.some((t=>t.scope))?void 0:Object.create(null);return(r,n)=>{let i=e&&e[r.id];if(void 0!==i)return i;let s=null;for(let e of t){let t=e.match(r,n);t&&(s=s?s+" "+t:t)}return e&&(e[r.id]=s),s}}static define(t,e){return new x(t,e||{})}static get(t,e,r){return v(t)(e,r||n.Jq.none)}}const w=o.Wl.fallback(s.lg.fromClass(class{constructor(t){this.markCache=Object.create(null),this.tree=(0,a.qz)(t.state),this.decorations=this.buildDeco(t,v(t.state))}update(t){let e=(0,a.qz)(t.state),r=v(t.state),n=r!=t.startState.facet(g);e.length<t.view.viewport.to&&!n?this.decorations=this.decorations.map(t.changes):(e!=this.tree||t.viewportChanged||n)&&(this.tree=e,this.decorations=this.buildDeco(t.view,r))}buildDeco(t,e){if(e==b||!this.tree.length)return s.p.none;let r=new l.f_;for(let{from:n,to:i}of t.visibleRanges)S(this.tree,n,i,e,((t,e,n)=>{r.add(t,e,this.markCache[n]||(this.markCache[n]=s.p.mark({class:n})))}));return r.finish()}},{decorations:t=>t.decorations})),C=[""];function S(t,e,r,n,i){let s=e,o="",a=t.topNode.cursor;!function t(l,h,c){let{type:u,from:f,to:d}=a;if(f>=r||d<=e)return;C[h]=u.name,u.isTop&&(c=u);let p=l,g=u.prop(m),y=!1;for(;g;){if(!g.context||A(g.context,C,h)){for(let t of g.tags){let e=n(t,c);e&&(p&&(p+=" "),p+=e,1==g.mode?l+=(l?" ":"")+e:0==g.mode&&(y=!0))}break}g=g.next}if(p!=o&&(f>s&&o&&i(s,a.from,o),s=f,o=p),!y&&a.firstChild()){do{let e=a.to;if(t(l,h+1,c),o!=p){let t=Math.min(r,e);t>s&&o&&i(s,t,o),s=t,o=p}}while(a.nextSibling());a.parent()}}("",0,t.type)}function A(t,e,r){if(t.length>r-1)return!1;for(let n=r-1,i=t.length-1;i>=0;i--,n--){let r=t[i];if(r&&r!=e[n])return!1}return!0}const M=c.define,T=M(),D=M(),N=M(D),L=M(),P=M(L),B=M(L),O=M(),j=M(O),R=M(),E=M(),q=M(),I=M(q),z=M(),_={comment:T,lineComment:M(T),blockComment:M(T),docComment:M(T),name:D,variableName:M(D),typeName:N,tagName:M(N),propertyName:M(D),className:M(D),labelName:M(D),namespace:M(D),macroName:M(D),literal:L,string:P,docString:M(P),character:M(P),number:B,integer:M(B),float:M(B),bool:M(L),regexp:M(L),escape:M(L),color:M(L),url:M(L),keyword:R,self:M(R),null:M(R),atom:M(R),unit:M(R),modifier:M(R),operatorKeyword:M(R),controlKeyword:M(R),definitionKeyword:M(R),operator:E,derefOperator:M(E),arithmeticOperator:M(E),logicOperator:M(E),bitwiseOperator:M(E),compareOperator:M(E),updateOperator:M(E),definitionOperator:M(E),typeOperator:M(E),controlOperator:M(E),punctuation:q,separator:M(q),bracket:I,angleBracket:M(I),squareBracket:M(I),paren:M(I),brace:M(I),content:O,heading:j,heading1:M(j),heading2:M(j),heading3:M(j),heading4:M(j),heading5:M(j),heading6:M(j),contentSeparator:M(O),list:M(O),quote:M(O),emphasis:M(O),strong:M(O),link:M(O),monospace:M(O),inserted:M(),deleted:M(),changed:M(),invalid:M(),meta:z,documentMeta:M(z),annotation:M(z),processingInstruction:M(z),definition:c.defineModifier(),constant:c.defineModifier(),function:c.defineModifier(),standard:c.defineModifier(),local:c.defineModifier(),special:c.defineModifier()};x.define([{tag:_.link,textDecoration:"underline"},{tag:_.heading,textDecoration:"underline",fontWeight:"bold"},{tag:_.emphasis,fontStyle:"italic"},{tag:_.strong,fontWeight:"bold"},{tag:_.keyword,color:"#708"},{tag:[_.atom,_.bool,_.url,_.contentSeparator,_.labelName],color:"#219"},{tag:[_.literal,_.inserted],color:"#164"},{tag:[_.string,_.deleted],color:"#a11"},{tag:[_.regexp,_.escape,_.special(_.string)],color:"#e40"},{tag:_.definition(_.variableName),color:"#00f"},{tag:_.local(_.variableName),color:"#30a"},{tag:[_.typeName,_.namespace],color:"#085"},{tag:_.className,color:"#167"},{tag:[_.special(_.variableName),_.macroName],color:"#256"},{tag:_.definition(_.propertyName),color:"#00c"},{tag:_.comment,color:"#940"},{tag:_.meta,color:"#7a757a"},{tag:_.invalid,color:"#f00"}]),x.define([{tag:_.link,class:"cmt-link"},{tag:_.heading,class:"cmt-heading"},{tag:_.emphasis,class:"cmt-emphasis"},{tag:_.strong,class:"cmt-strong"},{tag:_.keyword,class:"cmt-keyword"},{tag:_.atom,class:"cmt-atom"},{tag:_.bool,class:"cmt-bool"},{tag:_.url,class:"cmt-url"},{tag:_.labelName,class:"cmt-labelName"},{tag:_.inserted,class:"cmt-inserted"},{tag:_.deleted,class:"cmt-deleted"},{tag:_.literal,class:"cmt-literal"},{tag:_.string,class:"cmt-string"},{tag:_.number,class:"cmt-number"},{tag:[_.regexp,_.escape,_.special(_.string)],class:"cmt-string2"},{tag:_.variableName,class:"cmt-variableName"},{tag:_.local(_.variableName),class:"cmt-variableName cmt-local"},{tag:_.definition(_.variableName),class:"cmt-variableName cmt-definition"},{tag:_.special(_.variableName),class:"cmt-variableName2"},{tag:_.typeName,class:"cmt-typeName"},{tag:_.namespace,class:"cmt-namespace"},{tag:_.macroName,class:"cmt-macroName"},{tag:_.propertyName,class:"cmt-propertyName"},{tag:_.operator,class:"cmt-operator"},{tag:_.comment,class:"cmt-comment"},{tag:_.meta,class:"cmt-meta"},{tag:_.invalid,class:"cmt-invalid"},{tag:_.punctuation,class:"cmt-punctuation"}])},64928:(t,e,r)=>{"use strict";r.d(e,{Gn:()=>A,SQ:()=>h,kU:()=>l,y1:()=>w,K0:()=>S,tK:()=>k,SS:()=>C,c:()=>x,mi:()=>a,qz:()=>u});var n=r(26856),i=r(23414),s=r(77885),o=r(19753);const a=new n.md;function l(t){return s.r$.define({combine:t?e=>e.concat(t):void 0})}class h{constructor(t,e,r,n=[]){this.data=t,this.topNode=r,s.yy.prototype.hasOwnProperty("tree")||Object.defineProperty(s.yy.prototype,"tree",{get(){return u(this)}}),this.parser=e,this.extension=[v.of(this),s.yy.languageData.of(((t,e)=>t.facet(c(t,e))))].concat(n)}isActiveAt(t,e){return c(t,e)==this.data}findRegions(t){let e=t.facet(v);if((null==e?void 0:e.data)==this.data)return[{from:0,to:t.doc.length}];if(!e||!e.allowsNesting)return[];let r=[];return u(t).iterate({enter:(t,e,n)=>{if(t.isTop&&t.prop(a)==this.data)return r.push({from:e,to:n}),!1}}),r}get allowsNesting(){return!0}parseString(t){let e,r=i.xv.of(t.split("\n")),o=this.parser.startParse(new f(r),0,new d(this.parser,s.yy.create({doc:r}),[],n.mp.empty,{from:0,to:t.length},[],null));for(;!(e=o.advance()););return e}}function c(t,e){let r=t.facet(v);if(!r)return null;if(!r.allowsNesting)return r.data;let n=u(t).resolve(e,-1);for(;n;){let t=n.type.prop(a);if(t)return t;n=n.parent}return r.data}h.setState=s.Py.define();function u(t){let e=t.field(h.state,!1);return e?e.tree:n.mp.empty}class f{constructor(t,e=t.length){this.doc=t,this.length=e,this.cursorPos=0,this.string="",this.prevString="",this.cursor=t.iter()}syncTo(t){return t<this.cursorPos&&(this.cursor=this.doc.iter(),this.cursorPos=0),this.prevString=t==this.cursorPos?this.string:"",this.string=this.cursor.next(t-this.cursorPos).value,this.cursorPos=t+this.string.length,this.cursorPos-this.string.length}get(t){if(t>=this.length)return-1;let e=this.cursorPos-this.string.length;if(t<e||t>=this.cursorPos){if(t<e&&t>=e-this.prevString.length)return this.prevString.charCodeAt(t-(e-this.prevString.length));e=this.syncTo(t)}return this.string.charCodeAt(t-e)}lineAfter(t){if(t>=this.length||t<0)return"";let e=this.cursorPos-this.string.length;return(t<e||t>=this.cursorPos)&&(e=this.syncTo(t)),this.cursor.lineBreak?"":this.string.slice(t-e,Math.min(this.length-e,this.string.length))}read(t,e){let r=this.cursorPos-this.string.length;return t<r||e>=this.cursorPos?this.doc.sliceString(t,e):this.string.slice(t-r,e-r)}clip(t){return new f(this.doc,t)}}class d{constructor(t,e,r=[],n,i,s,o){this.parser=t,this.state=e,this.fragments=r,this.tree=n,this.viewport=i,this.skipped=s,this.scheduleOn=o,this.parse=null,this.tempSkipped=[]}work(t,e){if(this.tree!=n.mp.empty&&(null==e?this.tree.length==this.state.doc.length:this.tree.length>=e))return this.takeTree(),!0;this.parse||(this.parse=this.parser.startParse(new f(this.state.doc),0,this));let r=Date.now()+t;for(;;){let t=this.parse.advance();if(t)return this.fragments=this.withoutTempSkipped(n.i9.addTree(t)),this.parse=null,this.tree=t,!0;if(null!=e&&this.parse.pos>=e)return this.takeTree(),!0;if(Date.now()>r)return!1}}takeTree(){this.parse&&this.parse.pos>this.tree.length&&(this.tree=this.parse.forceFinish(),this.fragments=this.withoutTempSkipped(n.i9.addTree(this.tree,this.fragments,!0)))}withoutTempSkipped(t){for(let e;e=this.tempSkipped.pop();)t=p(t,e.from,e.to);return t}changes(t,e){let{fragments:r,tree:i,viewport:s,skipped:o}=this;if(this.takeTree(),!t.empty){let e=[];if(t.iterChangedRanges(((t,r,n,i)=>e.push({fromA:t,toA:r,fromB:n,toB:i}))),r=n.i9.applyChanges(r,e),i=n.mp.empty,s={from:t.mapPos(s.from,-1),to:t.mapPos(s.to,1)},this.skipped.length){o=[];for(let e of this.skipped){let r=t.mapPos(e.from,1),n=t.mapPos(e.to,-1);r<n&&o.push({from:r,to:n})}}}return new d(this.parser,e,r,i,s,o,this.scheduleOn)}updateViewport(t){this.viewport=t;let e=this.skipped.length;for(let e=0;e<this.skipped.length;e++){let{from:r,to:n}=this.skipped[e];r<t.to&&n>t.from&&(this.fragments=p(this.fragments,r,n),this.skipped.splice(e--,1))}return this.skipped.length<e}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(t,e){this.skipped.push({from:t,to:e})}static getSkippingParser(t){return{startParse:(e,r,i)=>({pos:r,advance(){let s=i;return s.tempSkipped.push({from:r,to:e.length}),t&&(s.scheduleOn=s.scheduleOn?Promise.all([s.scheduleOn,t]):t),this.pos=e.length,new n.mp(n.Jq.none,[],[],e.length-r)},forceFinish(){return this.advance()}})}}movedPast(t){return this.tree.length<t&&this.parse&&this.parse.pos>=t}}function p(t,e,r){return n.i9.applyChanges(t,[{fromA:e,toA:r,fromB:e,toB:r}])}d.skippingParser=d.getSkippingParser();class m{constructor(t){this.context=t,this.tree=t.tree}apply(t){if(!t.docChanged)return this;let e=this.context.changes(t.changes,t.state),r=this.context.tree.length==t.startState.doc.length?void 0:Math.max(t.changes.mapPos(this.context.tree.length),e.viewport.to);return e.work(25,r)||e.takeTree(),new m(e)}static init(t){let e=new d(t.facet(v).parser,t,[],n.mp.empty,{from:0,to:t.doc.length},[],null);return e.work(25)||e.takeTree(),new m(e)}}h.state=s.QQ.define({create:m.init,update(t,e){for(let t of e.effects)if(t.is(h.setState))return t.value;return e.startState.facet(v)!=e.state.facet(v)?m.init(e.state):t.apply(e)}});let g="undefined"!=typeof window&&window.requestIdleCallback||((t,{timeout:e})=>setTimeout(t,e)),y="undefined"!=typeof window&&window.cancelIdleCallback||clearTimeout;const b=o.lg.fromClass(class{constructor(t){this.view=t,this.working=-1,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(t){let e=this.view.state.field(h.state).context;t.viewportChanged&&(e.updateViewport(t.view.viewport)&&e.reset(),this.view.viewport.to>e.tree.length&&this.scheduleWork()),t.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(e)}scheduleWork(t=!1){if(this.working>-1)return;let{state:e}=this.view,r=e.field(h.state);!t&&r.tree.length>=e.doc.length||(this.working=g(this.work,{timeout:500}))}work(t){this.working=-1;let e=Date.now();if(this.chunkEnd<e&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=e+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:n}}=this.view,i=r.field(h.state);if(i.tree.length>=n+1e6)return;let s=Math.min(this.chunkBudget,t?Math.max(25,t.timeRemaining()):100),o=i.context.work(s,n+1e6);this.chunkBudget-=Date.now()-e,(o||this.chunkBudget<=0||i.context.movedPast(n))&&(i.context.takeTree(),this.view.dispatch({effects:h.setState.of(new m(i.context))})),!o&&this.chunkBudget>0&&this.scheduleWork(),this.checkAsyncSchedule(i.context)}checkAsyncSchedule(t){t.scheduleOn&&(t.scheduleOn.then((()=>this.scheduleWork(!0))),t.scheduleOn=null)}destroy(){this.working>=0&&y(this.working)}},{eventHandlers:{focus(){this.scheduleWork()}}}),v=s.r$.define({combine:t=>t.length?t[0]:null,enables:[h.state,b]});const k=s.r$.define(),x=s.r$.define({combine:t=>{if(!t.length)return"  ";if(!/^(?: +|\t+)$/.test(t[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return t[0]}});function w(t){let e=t.facet(x);return 9==e.charCodeAt(0)?t.tabSize*e.length:e.length}function C(t,e){let r="",n=t.tabSize;if(9==t.facet(x).charCodeAt(0))for(;e>=n;)r+="\t",e-=n;for(let t=0;t<e;t++)r+=" ";return r}function S(t,e){t instanceof s.yy&&(t=new A(t));for(let r of t.state.facet(k)){let n=r(t,e);if(null!=n)return n}let r=u(t.state);return r?function(t,e,r){let n=e.resolve(r);for(let t=n,e=r;;){let r=t.childBefore(e);if(!r)break;r.type.isError&&r.from==r.to?(n=t,e=r.from):(t=r,e=t.to+1)}return D(n,r,t)}(t,r,e):null}class A{constructor(t,e={}){this.state=t,this.options=e,this.unit=w(t)}textAfterPos(t){var e,r;let n=null===(e=this.options)||void 0===e?void 0:e.simulateBreak;return t==n&&(null===(r=this.options)||void 0===r?void 0:r.simulateDoubleBreak)?"":this.state.sliceDoc(t,Math.min(t+100,null!=n&&n>t?n:1e9,this.state.doc.lineAt(t).to))}column(t){var e;let r=this.state.doc.lineAt(t),n=r.text.slice(0,t-r.from),i=this.countColumn(n,t-r.from),s=(null===(e=this.options)||void 0===e?void 0:e.overrideIndentation)?this.options.overrideIndentation(r.from):-1;return s>-1&&(i+=s-this.countColumn(n,n.search(/\S/))),i}countColumn(t,e){return(0,i.IS)(e<0?t:t.slice(0,e),0,this.state.tabSize)}lineIndent(t){var e;let r=null===(e=this.options)||void 0===e?void 0:e.overrideIndentation;if(r){let e=r(t.from);if(e>-1)return e}return this.countColumn(t.text,t.text.search(/\S/))}}const M=new n.md;function T(t){let e=t.type.prop(M);if(e)return e;let r,i=t.firstChild;if(i&&(r=i.type.prop(n.md.closedBy))){let e=t.lastChild,n=e&&r.indexOf(e.name)>-1;return t=>B(t,!0,1,void 0,n&&!function(t){var e,r;return t.pos==(null===(e=t.options)||void 0===e?void 0:e.simulateBreak)&&(null===(r=t.options)||void 0===r?void 0:r.simulateDoubleBreak)}(t)?e.from:void 0)}return null==t.parent?N:null}function D(t,e,r){for(;t;t=t.parent){let n=T(t);if(n)return n(new L(r,e,t))}return null}function N(){return 0}class L extends A{constructor(t,e,r){super(t.state,t.options),this.base=t,this.pos=e,this.node=r}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){let t=this.state.doc.lineAt(this.node.from);for(;;){let e=this.node.resolve(t.from);for(;e.parent&&e.parent.from==e.from;)e=e.parent;if(P(e,this.node))break;t=this.state.doc.lineAt(e.from)}return this.lineIndent(t)}continue(){let t=this.node.parent;return t?D(t,this.pos,this.base):0}}function P(t,e){for(let r=e;r;r=r.parent)if(t==r)return!0;return!1}function B(t,e,r,n,i){let s=t.textAfter,o=s.match(/^\s*/)[0].length,a=n&&s.slice(o,o+n.length)==n||i==t.pos+o,l=e?function(t){var e;let r=t.node,n=r.childAfter(r.from),i=r.lastChild;if(!n)return null;let s=null===(e=t.options)||void 0===e?void 0:e.simulateBreak,o=t.state.doc.lineAt(n.from),a=null==s||s<=o.from?o.to:Math.min(o.to,s);for(let t=n.to;;){let e=r.childAfter(t);if(!e||e==i)return null;if(!e.type.isSkipped)return e.from<a?n:null;t=e.to}}(t):null;return l?a?t.column(l.from):t.column(l.to):t.baseIndent+(a?0:t.unit*r)}s.r$.define(),new n.md},49413:(t,e,r)=>{"use strict";r.d(e,{b:()=>h});var n=["and","as","block","endblock","by","cycle","debug","else","elif","extends","filter","endfilter","firstof","for","endfor","if","endif","ifchanged","endifchanged","ifequal","endifequal","ifnotequal","endifnotequal","in","include","load","not","now","or","parsed","regroup","reversed","spaceless","endspaceless","ssi","templatetag","openblock","closeblock","openvariable","closevariable","openbrace","closebrace","opencomment","closecomment","widthratio","url","with","endwith","get_current_language","trans","endtrans","noop","blocktrans","endblocktrans","get_available_languages","get_current_language_bidi","plural"],i=/^[+\-*&%=<>!?|~^]/,s=/^[:\[\(\{]/,o=["true","false"],a=/^(\d[+\-\*\/])?\d+(\.\d+)?/;function l(t,e){var r=t.peek();if(e.incomment)return t.skipTo("#}")?(t.eatWhile(/\#|}/),e.incomment=!1):t.skipToEnd(),"comment";if(e.intag){if(e.operator){if(e.operator=!1,t.match(o))return"atom";if(t.match(a))return"number"}if(e.sign){if(e.sign=!1,t.match(o))return"atom";if(t.match(a))return"number"}if(e.instring)return r==e.instring&&(e.instring=!1),t.next(),"string";if("'"==r||'"'==r)return e.instring=r,t.next(),"string";if(t.match(e.intag+"}")||t.eat("-")&&t.match(e.intag+"}"))return e.intag=!1,"tag";if(t.match(i))return e.operator=!0,"operator";if(t.match(s))e.sign=!0;else if(t.eat(" ")||t.sol()){if(t.match(n))return"keyword";if(t.match(o))return"atom";if(t.match(a))return"number";t.sol()&&t.next()}else t.next();return"variable"}if(t.eat("{")){if(t.eat("#"))return e.incomment=!0,t.skipTo("#}")?(t.eatWhile(/\#|}/),e.incomment=!1):t.skipToEnd(),"comment";if(r=t.eat(/\{|%/))return e.intag=r,"{"==r&&(e.intag="}"),t.eat("-"),"tag"}t.next()}n=new RegExp("(("+n.join(")|(")+"))\\b"),o=new RegExp("(("+o.join(")|(")+"))\\b");const h={startState:function(){return{tokenize:l}},token:function(t,e){return e.tokenize(t,e)},languageData:{commentTokens:{block:{open:"{#",close:"#}"}}}}},8987:(t,e,r)=>{"use strict";r.d(e,{r:()=>i});var n=new RegExp("\\b(("+["true","false","on","off","yes","no"].join(")|(")+"))$","i");const i={token:function(t,e){var r=t.peek(),i=e.escaped;if(e.escaped=!1,"#"==r&&(0==t.pos||/\s/.test(t.string.charAt(t.pos-1))))return t.skipToEnd(),"comment";if(t.match(/^('([^']|\\.)*'?|"([^"]|\\.)*"?)/))return"string";if(e.literal&&t.indentation()>e.keyCol)return t.skipToEnd(),"string";if(e.literal&&(e.literal=!1),t.sol()){if(e.keyCol=0,e.pair=!1,e.pairStart=!1,t.match("---"))return"def";if(t.match("..."))return"def";if(t.match(/^\s*-\s+/))return"meta"}if(t.match(/^(\{|\}|\[|\])/))return"{"==r?e.inlinePairs++:"}"==r?e.inlinePairs--:"["==r?e.inlineList++:e.inlineList--,"meta";if(e.inlineList>0&&!i&&","==r)return t.next(),"meta";if(e.inlinePairs>0&&!i&&","==r)return e.keyCol=0,e.pair=!1,e.pairStart=!1,t.next(),"meta";if(e.pairStart){if(t.match(/^\s*(\||\>)\s*/))return e.literal=!0,"meta";if(t.match(/^\s*(\&|\*)[a-z0-9\._-]+\b/i))return"variable";if(0==e.inlinePairs&&t.match(/^\s*-?[0-9\.\,]+\s?$/))return"number";if(e.inlinePairs>0&&t.match(/^\s*-?[0-9\.\,]+\s?(?=(,|}))/))return"number";if(t.match(n))return"keyword"}return!e.pair&&t.match(/^\s*(?:[,\[\]{}&*!|>'"%@`][^\s'":]|[^,\[\]{}#&*!|>'"%@`])[^#]*?(?=\s*:($|\s))/)?(e.pair=!0,e.keyCol=t.indentation(),"atom"):e.pair&&t.match(/^:\s*/)?(e.pairStart=!0,"meta"):(e.pairStart=!1,e.escaped="\\"==r,t.next(),null)},startState:function(){return{pair:!1,pairStart:!1,keyCol:0,inlinePairs:0,inlineList:0,literal:!1,escaped:!1}},languageData:{commentTokens:{line:"#"}}}},63637:(t,e,r)=>{"use strict";r.d(e,{Z:()=>h});var n=r(77885),i=r(19753),s=r(23414);const o=2e3;function a(t,e){let r=t.posAtCoords({x:e.clientX,y:e.clientY});if(null==r)return null;let n=t.state.doc.lineAt(r),i=r-n.from,a=i>o?-1:i==n.length?function(t,e){let r=t.coordsAtPos(t.viewport.from);return r?Math.round(Math.abs((r.left-e)/t.defaultCharacterWidth)):-1}(t,e.clientX):(0,s.IS)(n.text.slice(0,r-n.from),0,t.state.tabSize);return{line:n.number,col:a,off:i}}function l(t,e){let r=a(t,e),i=t.state.selection;return r?{update(t){if(t.docChanged){let e=t.changes.mapPos(t.startState.doc.line(r.line).from),n=t.state.doc.lineAt(e);r={line:n.number,col:r.col,off:Math.min(r.off,n.length)},i=i.map(t.changes)}},get(e,l,h){let c=a(t,e);if(!c)return i;let u=function(t,e,r){let i=Math.min(e.line,r.line),a=Math.max(e.line,r.line),l=[];if(e.off>o||r.off>o||e.col<0||r.col<0){let s=Math.min(e.off,r.off),o=Math.max(e.off,r.off);for(let e=i;e<=a;e++){let r=t.doc.line(e);r.length<=o&&l.push(n.jT.range(r.from+s,r.to+o))}}else{let h=Math.min(e.col,r.col),c=Math.max(e.col,r.col);for(let e=i;e<=a;e++){let r=t.doc.line(e),i=r.length>o?r.text.slice(0,2*c):r.text,a=(0,s.Gz)(i,0,h,t.tabSize),u=(0,s.Gz)(i,0,c,t.tabSize);a.leftOver||l.push(n.jT.range(r.from+a.offset,r.from+u.offset))}}return l}(t.state,r,c);return u.length?h?n.jT.create(u.concat(i.ranges)):n.jT.create(u):i}}:null}function h(t){let e=(null==t?void 0:t.eventFilter)||(t=>t.altKey&&0==t.button);return i.tk.mouseSelectionStyle.of(((t,r)=>e(r)?l(t,r):null))}},72360:(t,e,r)=>{"use strict";r.d(e,{sW:()=>L,Lp:()=>rt});var n=r(19753),i=r(77885);const s=i.r$.define({combine(t){let e,r;for(let n of t)e=e||n.topContainer,r=r||n.bottomContainer;return{topContainer:e,bottomContainer:r}}});function o(t,e){let r=t.plugin(a),n=r?r.specs.indexOf(e):-1;return n>-1?r.panels[n]:null}const a=n.lg.fromClass(class{constructor(t){this.input=t.state.facet(u),this.specs=this.input.filter((t=>t)),this.panels=this.specs.map((e=>e(t)));let e=t.state.facet(s);this.top=new l(t,!0,e.topContainer),this.bottom=new l(t,!1,e.bottomContainer),this.top.sync(this.panels.filter((t=>t.top))),this.bottom.sync(this.panels.filter((t=>!t.top)));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.class&&t.dom.classList.add(t.class),t.mount&&t.mount()}update(t){let e=t.state.facet(s);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new l(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new l(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let r=t.state.facet(u);if(r!=this.input){let e=r.filter((t=>t)),n=[],i=[],s=[],o=[];for(let r of e){let e,a=this.specs.indexOf(r);a<0?(e=r(t.view),o.push(e)):(e=this.panels[a],e.update&&e.update(t)),n.push(e),(e.top?i:s).push(e)}this.specs=e,this.panels=n,this.top.sync(i),this.bottom.sync(s);for(let t of o)t.dom.classList.add("cm-panel"),t.class&&t.dom.classList.add(t.class),t.mount&&t.mount()}else for(let e of this.panels)e.update&&e.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:n.BF.scrollMargins.from((t=>({top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()})))});class l{constructor(t,e,r){this.view=t,this.top=e,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(t){this.panels=t,this.syncDOM()}syncDOM(){if(0==this.panels.length)return void(this.dom&&(this.dom.remove(),this.dom=void 0));if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let t=this.dom.firstChild;for(let e of this.panels)if(e.dom.parentNode==this.dom){for(;t!=e.dom;)t=h(t);t=t.nextSibling}else this.dom.insertBefore(e.dom,t);for(;t;)t=h(t)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-this.view.scrollDOM.getBoundingClientRect().top:this.view.scrollDOM.getBoundingClientRect().bottom-this.dom.getBoundingClientRect().top)}syncClasses(){if(this.container&&this.classes!=this.view.themeClasses){for(let t of this.classes.split(" "))t&&this.container.classList.remove(t);for(let t of(this.classes=this.view.themeClasses).split(" "))t&&this.container.classList.add(t)}}}function h(t){let e=t.nextSibling;return t.remove(),e}const c=n.tk.baseTheme({".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"}}),u=i.r$.define({enables:[a,c]});var f=r(13764);function d(){var t=arguments[0];"string"==typeof t&&(t=document.createElement(t));var e=1,r=arguments[1];if(r&&"object"==typeof r&&null==r.nodeType&&!Array.isArray(r)){for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){var i=r[n];"string"==typeof i?t.setAttribute(n,i):null!=i&&(t[n]=i)}e++}for(;e<arguments.length;e++)p(t,arguments[e]);return t}function p(t,e){if("string"==typeof e)t.appendChild(document.createTextNode(e));else if(null==e);else if(null!=e.nodeType)t.appendChild(e);else{if(!Array.isArray(e))throw new RangeError("Unsupported child node: "+e);for(var r=0;r<e.length;r++)p(t,e[r])}}var m=r(23414);const g="function"==typeof String.prototype.normalize?t=>t.normalize("NFKD"):t=>t;class y{constructor(t,e,r=0,n=t.length,i){this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=t.iterRange(r,n),this.bufferStart=r,this.normalize=i?t=>i(g(t)):g,this.query=this.normalize(e)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return(0,m.gm)(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let t=this.peek();if(t<0)return this.done=!0,this;let e=(0,m.bg)(t),r=this.bufferStart+this.bufferPos;this.bufferPos+=(0,m.nZ)(t);let n=this.normalize(e);for(let t=0,i=r;;t++){let s=n.charCodeAt(t),o=this.match(s,i);if(o)return this.value=o,this;if(t==n.length-1)break;i==r&&t<e.length&&e.charCodeAt(t)==s&&i++}}}match(t,e){let r=null;for(let n=0;n<this.matches.length;n+=2){let i=this.matches[n],s=!1;this.query.charCodeAt(i)==t&&(i==this.query.length-1?r={from:this.matches[n+1],to:e+1}:(this.matches[n]++,s=!0)),s||(this.matches.splice(n,2),n-=2)}return this.query.charCodeAt(0)==t&&(1==this.query.length?r={from:e,to:e+1}:this.matches.push(1,e)),r}}const b={from:-1,to:-1,match:/.*/.exec("")},v="gm"+(null==/x/.unicode?"":"u");class k{constructor(t,e,r,n=0,i=t.length){if(this.to=i,this.curLine="",this.done=!1,this.value=b,/\\[sWDnr]|\n|\r|\[\^/.test(e))return new C(t,e,r,n,i);this.re=new RegExp(e,v+((null==r?void 0:r.ignoreCase)?"i":"")),this.iter=t.iter();let s=t.lineAt(n);this.curLineStart=s.from,this.matchPos=n,this.getLine(this.curLineStart)}getLine(t){this.iter.next(t),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let t=this.matchPos-this.curLineStart;;){this.re.lastIndex=t;let e=this.matchPos<=this.to&&this.re.exec(this.curLine);if(e){let r=this.curLineStart+e.index,n=r+e[0].length;if(this.matchPos=n+(r==n?1:0),r==this.curLine.length&&this.nextLine(),r<n||r>this.value.to)return this.value={from:r,to:n,match:e},this;t=this.matchPos-this.curLineStart}else{if(!(this.curLineStart+this.curLine.length<this.to))return this.done=!0,this;this.nextLine(),t=0}}}}const x=new WeakMap;class w{constructor(t,e){this.from=t,this.text=e}get to(){return this.from+this.text.length}static get(t,e,r){let n=x.get(t);if(!n||n.from>=r||n.to<=e){let n=new w(e,t.sliceString(e,r));return x.set(t,n),n}if(n.from==e&&n.to==r)return n;let{text:i,from:s}=n;return s>e&&(i=t.sliceString(e,s)+i,s=e),n.to<r&&(i+=t.sliceString(n.to,r)),x.set(t,new w(s,i)),new w(e,i.slice(e-s,r-s))}}class C{constructor(t,e,r,n,i){this.text=t,this.to=i,this.done=!1,this.value=b,this.matchPos=n,this.re=new RegExp(e,v+((null==r?void 0:r.ignoreCase)?"i":"")),this.flat=w.get(t,n,this.chunkEnd(n+5e3))}chunkEnd(t){return t>=this.to?this.to:this.text.lineAt(t).to}next(){for(;;){let t=this.re.lastIndex=this.matchPos-this.flat.from,e=this.re.exec(this.flat.text);if(e&&!e[0]&&e.index==t&&(this.re.lastIndex=t+1,e=this.re.exec(this.flat.text)),e&&this.flat.to<this.to&&e.index+e[0].length>this.flat.text.length-10&&(e=null),e){let t=this.flat.from+e.index,r=t+e[0].length;return this.value={from:t,to:r,match:e},this.matchPos=r+(t==r?1:0),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=w.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+2*this.flat.text.length))}}}function S(t){let e=d("input",{class:"cm-textfield",name:"line"});function r(){let r=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(e.value);if(!r)return;let{state:n}=t,s=n.doc.lineAt(n.selection.main.head),[,o,a,l,h]=r,c=l?+l.slice(1):0,u=a?+a:s.number;if(a&&h){let t=u/100;o&&(t=t*("-"==o?-1:1)+s.number/n.doc.lines),u=Math.round(n.doc.lines*t)}else a&&o&&(u=u*("-"==o?-1:1)+s.number);let f=n.doc.line(Math.max(1,Math.min(n.doc.lines,u)));t.dispatch({effects:A.of(!1),selection:i.jT.cursor(f.from+Math.max(0,Math.min(c,f.length))),scrollIntoView:!0}),t.focus()}return{dom:d("form",{class:"cm-gotoLine",onkeydown:e=>{27==e.keyCode?(e.preventDefault(),t.dispatch({effects:A.of(!1)}),t.focus()):13==e.keyCode&&(e.preventDefault(),r())},onsubmit:t=>{t.preventDefault(),r()}},d("label",t.state.phrase("Go to line"),": ",e)," ",d("button",{class:"cm-button",type:"submit"},t.state.phrase("go"))),pos:-10}}const A=i.Py.define(),M=i.QQ.define({create:()=>!0,update(t,e){for(let r of e.effects)r.is(A)&&(t=r.value);return t},provide:t=>u.from(t,(t=>t?S:null))}),T=n.tk.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),D={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100},N=i.r$.define({combine:t=>(0,i.BO)(t,D,{highlightWordAroundCursor:(t,e)=>t||e,minSelectionLength:Math.min,maxMatches:Math.min})});function L(t){let e=[j,O];return t&&e.push(N.of(t)),e}const P=n.p.mark({class:"cm-selectionMatch"}),B=n.p.mark({class:"cm-selectionMatch cm-selectionMatch-main"}),O=n.lg.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.selectionSet||t.docChanged||t.viewportChanged)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=t.state.facet(N),{state:r}=t,s=r.selection;if(s.ranges.length>1)return n.p.none;let o,a=s.main,l=null;if(a.empty){if(!e.highlightWordAroundCursor)return n.p.none;let t=r.wordAt(a.head);if(!t)return n.p.none;l=r.charCategorizer(a.head),o=r.sliceDoc(t.from,t.to)}else{let t=a.to-a.from;if(t<e.minSelectionLength||t>200)return n.p.none;if(o=r.sliceDoc(a.from,a.to).trim(),!o)return n.p.none}let h=[];for(let s of t.visibleRanges){let t=new y(r.doc,o,s.from,s.to);for(;!t.nextOverlapping().done;){let{from:s,to:o}=t.value;if((!l||(0==s||l(r.sliceDoc(s-1,s))!=i.D0.Word)&&(o==r.doc.length||l(r.sliceDoc(o,o+1))!=i.D0.Word))&&(l&&s<=a.from&&o>=a.to?h.push(B.range(s,o)):(s>=a.to||o<=a.from)&&h.push(P.range(s,o)),h.length>e.maxMatches))return n.p.none}}return n.p.set(h)}},{decorations:t=>t.decorations}),j=n.tk.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}});const R=i.r$.define({combine:t=>({top:t.some((t=>t.top))})});class E{constructor(t,e,r){this.search=t,this.replace=e,this.caseInsensitive=r}eq(t){return this.search==t.search&&this.replace==t.replace&&this.caseInsensitive==t.caseInsensitive&&this.constructor==t.constructor}}class q extends E{constructor(t,e,r){super(t,e,r),this.unquoted=t.replace(/\\([nrt\\])/g,((t,e)=>"n"==e?"\n":"r"==e?"\r":"t"==e?"\t":"\\"))}cursor(t,e=0,r=t.length){return new y(t,this.unquoted,e,r,this.caseInsensitive?t=>t.toLowerCase():void 0)}nextMatch(t,e,r){let n=this.cursor(t,r).nextOverlapping();return n.done&&(n=this.cursor(t,0,e).nextOverlapping()),n.done?null:n.value}prevMatchInRange(t,e,r){for(let n=r;;){let r=Math.max(e,n-1e4-this.unquoted.length),i=this.cursor(t,r,n),s=null;for(;!i.nextOverlapping().done;)s=i.value;if(s)return s;if(r==e)return null;n-=1e4}}prevMatch(t,e,r){return this.prevMatchInRange(t,0,e)||this.prevMatchInRange(t,r,t.length)}getReplacement(t){return this.replace}matchAll(t,e){let r=this.cursor(t),n=[];for(;!r.next().done;){if(n.length>=e)return null;n.push(r.value)}return n}highlight(t,e,r,n){let i=this.cursor(t,Math.max(0,e-this.unquoted.length),Math.min(r+this.unquoted.length,t.length));for(;!i.next().done;)n(i.value.from,i.value.to)}get valid(){return!!this.search}}class I extends E{constructor(t,e,r){super(t,e,r),this.valid=!!t&&function(t){try{return new RegExp(t,v),!0}catch(t){return!1}}(t)}cursor(t,e=0,r=t.length){return new k(t,this.search,this.caseInsensitive?{ignoreCase:!0}:void 0,e,r)}nextMatch(t,e,r){let n=this.cursor(t,r).next();return n.done&&(n=this.cursor(t,0,e).next()),n.done?null:n.value}prevMatchInRange(t,e,r){for(let n=1;;n++){let i=Math.max(e,r-1e4*n),s=this.cursor(t,i,r),o=null;for(;!s.next().done;)o=s.value;if(o&&(i==e||o.from>i+10))return o;if(i==e)return null}}prevMatch(t,e,r){return this.prevMatchInRange(t,0,e)||this.prevMatchInRange(t,r,t.length)}getReplacement(t){return this.replace.replace(/\$([$&\d+])/g,((e,r)=>"$"==r?"$":"&"==r?t.match[0]:"0"!=r&&+r<t.match.length?t.match[r]:e))}matchAll(t,e){let r=this.cursor(t),n=[];for(;!r.next().done;){if(n.length>=e)return null;n.push(r.value)}return n}highlight(t,e,r,n){let i=this.cursor(t,Math.max(0,e-250),Math.min(r+250,t.length));for(;!i.next().done;)n(i.value.from,i.value.to)}}const z=i.Py.define(),_=i.Py.define(),W=i.QQ.define({create:t=>new $(Z(t),Y),update(t,e){for(let r of e.effects)r.is(z)?t=new $(r.value,t.panel):r.is(_)&&(t=new $(t.query,r.value?Y:null));return t},provide:t=>u.from(t,(t=>t.panel))});class ${constructor(t,e){this.query=t,this.panel=e}}const V=n.p.mark({class:"cm-searchMatch"}),U=n.p.mark({class:"cm-searchMatch cm-searchMatch-selected"}),G=n.lg.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(W))}update(t){let e=t.state.field(W);(e!=t.startState.field(W)||t.docChanged||t.selectionSet)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.valid)return n.p.none;let{view:r}=this,i=new f.f_;for(let e=0,n=r.visibleRanges,s=n.length;e<s;e++){let{from:o,to:a}=n[e];for(;e<s-1&&a>n[e+1].from-500;)a=n[++e].to;t.highlight(r.state.doc,o,a,((t,e)=>{let n=r.state.selection.ranges.some((r=>r.from==t&&r.to==e));i.add(t,e,n?U:V)}))}return i.finish()}},{decorations:t=>t.decorations});function H(t){return e=>{let r=e.state.field(W,!1);return r&&r.query.valid?t(e,r):tt(e)}}const Q=H(((t,{query:e})=>{let{from:r,to:n}=t.state.selection.main,i=e.nextMatch(t.state.doc,r,n);return!(!i||i.from==r&&i.to==n)&&(t.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:st(t,i)}),!0)})),F=H(((t,{query:e})=>{let{state:r}=t,{from:n,to:i}=r.selection.main,s=e.prevMatch(r.doc,n,i);return!!s&&(t.dispatch({selection:{anchor:s.from,head:s.to},scrollIntoView:!0,effects:st(t,s)}),!0)})),J=H(((t,{query:e})=>{let r=e.matchAll(t.state.doc,1e3);return!(!r||!r.length)&&(t.dispatch({selection:i.jT.create(r.map((t=>i.jT.range(t.from,t.to))))}),!0)})),K=H(((t,{query:e})=>{let{state:r}=t,{from:n,to:i}=r.selection.main,s=e.nextMatch(r.doc,n,n);if(!s)return!1;let o,a,l=[];if(s.from==n&&s.to==i&&(a=r.toText(e.getReplacement(s)),l.push({from:s.from,to:s.to,insert:a}),s=e.nextMatch(r.doc,s.from,s.to)),s){let t=0==l.length||l[0].from>=s.to?0:s.to-s.from-a.length;o={anchor:s.from-t,head:s.to-t}}return t.dispatch({changes:l,selection:o,scrollIntoView:!!o,effects:s?st(t,s):void 0}),!0})),X=H(((t,{query:e})=>{let r=e.matchAll(t.state.doc,1e9).map((t=>{let{from:r,to:n}=t;return{from:r,to:n,insert:e.getReplacement(t)}}));return!!r.length&&(t.dispatch({changes:r}),!0)}));function Y(t){let{query:e}=t.state.field(W);return{dom:nt({view:t,query:e,updateQuery(r){e.eq(r)||(e=r,t.dispatch({effects:z.of(e)}))}}),mount(){this.dom.querySelector("[name=search]").select()},pos:80,top:t.state.facet(R).top}}function Z(t,e){let r=t.selection.main,n=r.empty||r.to>r.from+100?"":t.sliceDoc(r.from,r.to);return e&&!n?e:new q(n.replace(/\n/g,"\\n"),"",(null==e?void 0:e.caseInsensitive)||!1)}const tt=t=>{let e=t.state.field(W,!1);if(e&&e.panel){let e=o(t,Y);if(!e)return!1;e.dom.querySelector("[name=search]").focus()}else t.dispatch({effects:[_.of(!0),e?z.of(Z(t.state,e.query)):i.Py.appendConfig.of(at)]});return!0},et=t=>{let e=t.state.field(W,!1);if(!e||!e.panel)return!1;let r=o(t,Y);return r&&r.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:_.of(!1)}),!0},rt=[{key:"Mod-f",run:tt,scope:"editor search-panel"},{key:"F3",run:Q,shift:F,scope:"editor search-panel"},{key:"Mod-g",run:Q,shift:F,scope:"editor search-panel"},{key:"Escape",run:et,scope:"editor search-panel"},{key:"Mod-Shift-l",run:({state:t,dispatch:e})=>{let r=t.selection;if(r.ranges.length>1||r.main.empty)return!1;let{from:n,to:s}=r.main,o=[],a=0;for(let e=new y(t.doc,t.sliceDoc(n,s));!e.next().done;){if(o.length>1e3)return!1;e.value.from==n&&(a=o.length),o.push(i.jT.range(e.value.from,e.value.to))}return e(t.update({selection:i.jT.create(o,a)})),!0}},{key:"Alt-g",run:t=>{let e=o(t,S);if(!e){let r=[A.of(!0)];null==t.state.field(M,!1)&&r.push(i.Py.appendConfig.of([M,T])),t.dispatch({effects:r}),e=o(t,S)}return e&&e.dom.querySelector("input").focus(),!0}},{key:"Mod-d",run:({state:t,dispatch:e})=>{let{ranges:r}=t.selection;if(r.some((t=>t.from===t.to)))return(({state:t,dispatch:e})=>{let{selection:r}=t,n=i.jT.create(r.ranges.map((e=>t.wordAt(e.head)||i.jT.cursor(e.head))),r.mainIndex);return!n.eq(r)&&(e(t.update({selection:n})),!0)})({state:t,dispatch:e});let n=t.sliceDoc(r[0].from,r[0].to);if(t.selection.ranges.some((e=>t.sliceDoc(e.from,e.to)!=n)))return!1;let s=function(t,e){let{ranges:r}=t.selection,n=new y(t.doc,e,r[r.length-1].to).next();if(!n.done)return n.value;let i=new y(t.doc,e,0,Math.max(0,r[r.length-1].from-1));for(;!i.next().done;)if(!r.some((t=>t.from===i.value.from)))return i.value;return null}(t,n);return!!s&&(e(t.update({selection:t.selection.addRange(i.jT.range(s.from,s.to)),scrollIntoView:!0})),!0)}}];function nt(t){function e(e){return t.view.state.phrase(e)}let r=d("input",{value:t.query.search,placeholder:e("Find"),"aria-label":e("Find"),class:"cm-textfield",name:"search",onchange:a,onkeyup:a}),i=d("input",{value:t.query.replace,placeholder:e("Replace"),"aria-label":e("Replace"),class:"cm-textfield",name:"replace",onchange:a,onkeyup:a}),s=d("input",{type:"checkbox",name:"case",checked:!t.query.caseInsensitive,onchange:a}),o=d("input",{type:"checkbox",name:"re",checked:t.query instanceof I,onchange:a});function a(){t.updateQuery(new(o.checked?I:q)(r.value,i.value,!s.checked))}function l(t,e,r){return d("button",{class:"cm-button",name:t,onclick:e},r)}return d("div",{onkeydown:function(e){(0,n.$1)(t.view,e,"search-panel")?e.preventDefault():13==e.keyCode&&e.target==r?(e.preventDefault(),(e.shiftKey?F:Q)(t.view)):13==e.keyCode&&e.target==i&&(e.preventDefault(),K(t.view))},class:"cm-search"},[r,l("next",(()=>Q(t.view)),[e("next")]),l("prev",(()=>F(t.view)),[e("previous")]),l("select",(()=>J(t.view)),[e("all")]),d("label",null,[s,e("match case")]),d("label",null,[o,e("regexp")]),d("br"),i,l("replace",(()=>K(t.view)),[e("replace")]),l("replaceAll",(()=>X(t.view)),[e("replace all")]),d("button",{name:"close",onclick:()=>et(t.view),"aria-label":e("close")},["×"])])}const it=/[\s\.,:;?!]/;function st(t,{from:e,to:r}){let i=t.state.doc.lineAt(e).from,s=t.state.doc.lineAt(r).to,o=Math.max(i,e-30),a=Math.min(s,r+30),l=t.state.sliceDoc(o,a);if(o!=i)for(let t=0;t<30;t++)if(!it.test(l[t+1])&&it.test(l[t])){l=l.slice(t);break}if(a!=s)for(let t=l.length-1;t>l.length-30;t--)if(!it.test(l[t-1])&&it.test(l[t])){l=l.slice(0,t);break}return n.tk.announce.of(`${t.state.phrase("current match")}. ${l} ${t.state.phrase("on line")} ${t.state.doc.lineAt(e).number}`)}const ot=n.tk.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),at=[W,i.Wl.override(G),ot]},11163:(t,e,r)=>{"use strict";r.d(e,{i:()=>c});var n=r(26856),i=r(49619),s=r(64928),o=r(23414);function a(t,e,r,n=0,i=0){return null==e&&-1==(e=t.search(/[^\s\u00a0]/))&&(e=t.length),(0,o.IS)(t.slice(n,e),i,r)}class l{constructor(t,e,r){this.string=t,this.tabSize=e,this.indentUnit=r,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return 0==this.pos}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(t){let e,r=this.string.charAt(this.pos);if(e="string"==typeof t?r==t:r&&(t instanceof RegExp?t.test(r):t(r)),e)return++this.pos,r}eatWhile(t){let e=this.pos;for(;this.eat(t););return this.pos>e}eatSpace(){let t=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>t}skipToEnd(){this.pos=this.string.length}skipTo(t){let e=this.string.indexOf(t,this.pos);if(e>-1)return this.pos=e,!0}backUp(t){this.pos-=t}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=a(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){return a(this.string,null,this.tabSize)}match(t,e,r){if("string"==typeof t){let n=t=>r?t.toLowerCase():t;return n(this.string.substr(this.pos,t.length))==n(t)?(!1!==e&&(this.pos+=t.length),!0):null}{let r=this.string.slice(this.pos).match(t);return r&&r.index>0?null:(r&&!1!==e&&(this.pos+=r[0].length),r)}}current(){return this.string.slice(this.start,this.pos)}}function h(t){if("object"!=typeof t)return t;let e={};for(let r in t){let n=t[r];e[r]=n instanceof Array?n.slice():n}return e}class c extends s.SQ{constructor(t){let e=(0,s.kU)(t.languageData),r={token:(i=t).token,blankLine:i.blankLine||(()=>{}),startState:i.startState||(()=>!0),copyState:i.copyState||h,indent:i.indent||(()=>null),languageData:i.languageData||{}};var i;super(e,{startParse:(t,e,r)=>new d(this,t,e,r)},function(t){let e=n.Jq.define({id:g.length,name:"Document",props:[s.mi.add((()=>t))]});return g.push(e),e}(e),[s.tK.of(((t,e)=>this.getIndent(t,e)))]),this.streamParser=r,this.stateAfter=new WeakMap}static define(t){return new c(t)}getIndent(t,e){let r=(0,s.qz)(t.state),n=r.resolve(e);for(;n&&n.type!=this.topNode;)n=n.parent;if(!n)return null;let i,o,a=u(this,r,0,n.from,e);if(a?(o=a.state,i=a.pos+1):(o=this.streamParser.startState(t.unit),i=0),e-i>1e4)return null;for(;i<e;){let r=t.state.doc.lineAt(i),n=Math.min(e,r.to);if(r.length){let e=new l(r.text,t.state.tabSize,t.unit);for(;e.pos<n-r.from;)p(this.streamParser.token,e,o)}else this.streamParser.blankLine(o,t.unit);if(n==e)break;i=r.to+1}let{text:h}=t.state.doc.lineAt(e);return this.streamParser.indent(o,/^\s*(.*)/.exec(h)[1],t)}get allowsNesting(){return!1}}function u(t,e,r,i,s){let o=r>=i&&r+e.length<=s&&t.stateAfter.get(e);if(o)return{state:t.streamParser.copyState(o),pos:r+e.length};for(let o=e.children.length-1;o>=0;o--){let a=e.children[o],l=r+e.positions[o],h=a instanceof n.mp&&l<s&&u(t,a,l,i,s);if(h)return h}return null}function f(t,e,r,i,s){if(s&&r<=0&&i>=e.length)return e;s||e.type!=t.topNode||(s=!0);for(let o=e.children.length-1;o>=0;o--){let a,l=e.positions[o]+r,h=e.children[o];if(l<i&&h instanceof n.mp){if(!(a=f(t,h,r-l,i-l,s)))break;return s?new n.mp(e.type,e.children.slice(0,o).concat(a),e.positions.slice(0,o+1),l+a.length):a}}return null}class d{constructor(t,e,r,i){this.lang=t,this.input=e,this.startPos=r,this.context=i,this.chunks=[],this.chunkPos=[],this.chunk=[];let{state:o,tree:a}=function(t,e,r,i){for(let n of e){let e,i=n.from<=r&&n.to>r&&u(t,n.tree,0-n.offset,r,n.to);if(i&&(e=f(t,n.tree,r+n.offset,i.pos+n.offset,!1)))return{state:i.state,tree:e}}return{state:t.streamParser.startState((0,s.y1)(i)),tree:n.mp.empty}}(t,i.fragments,r,i.state);this.state=o,this.pos=this.chunkStart=r+a.length,a.length&&(this.chunks.push(a),this.chunkPos.push(0)),this.pos<i.viewport.from-1e5&&(this.state=this.lang.streamParser.startState((0,s.y1)(i.state)),i.skipUntilInView(this.pos,i.viewport.from),this.pos=i.viewport.from)}advance(){let t=Math.min(this.context.viewport.to,this.input.length,this.chunkStart+2048);for(;this.pos<t;)this.parseLine();return this.chunkStart<this.pos&&this.finishChunk(),t<this.input.length&&this.pos<this.context.viewport.to?null:(this.context.skipUntilInView(this.pos,this.input.length),this.finish())}parseLine(){let t=this.input.lineAfter(this.pos),{streamParser:e}=this.lang,r=new l(t,this.context?this.context.state.tabSize:4,(0,s.y1)(this.context.state));if(r.eol())e.blankLine(this.state,r.indentUnit);else for(;!r.eol();){let t=p(e.token,r,this.state);t&&this.chunk.push(v(t),this.pos+r.start,this.pos+r.pos,4)}this.pos+=t.length,this.pos<this.input.length&&this.pos++}finishChunk(){let t=n.mp.build({buffer:this.chunk,start:this.chunkStart,length:this.pos-this.chunkStart,nodeSet:y,topID:0,maxBufferLength:2048});this.lang.stateAfter.set(t,this.lang.streamParser.copyState(this.state)),this.chunks.push(t),this.chunkPos.push(this.chunkStart-this.startPos),this.chunk=[],this.chunkStart=this.pos}finish(){return new n.mp(this.lang.topNode,this.chunks,this.chunkPos,this.pos-this.startPos).balance()}forceFinish(){return this.finish()}}function p(t,e,r){e.start=e.pos;for(let n=0;n<10;n++){let n=t(e,r);if(e.pos>e.start)return n}throw new Error("Stream parser failed to advance stream.")}const m=Object.create(null),g=[n.Jq.none],y=new n.Lj(g),b=[];function v(t){return t?m[t]||(m[t]=function(t){let e=null;for(let r of t.split(".")){let t=i.pJ[r];t?"function"==typeof t?e?e=t(e):k(r,`Modifier ${r} used at start of tag`):e?k(r,`Tag ${r} used as modifier`):e=t:k(r,`Unknown highlighting tag ${r}`)}if(!e)return 0;let r=t.replace(/ /g,"_"),s=n.Jq.define({id:g.length,name:r,props:[(0,i.Gv)({[r]:e})]});return g.push(s),s.id}(t)):0}for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","typeName"],["attribute","propertyName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])m[t]=v(e);function k(t,e){b.indexOf(t)>-1||(b.push(t),console.warn(e))}},26856:(t,e,r)=>{"use strict";r.d(e,{md:()=>o,Lj:()=>h,Jq:()=>l,mp:()=>c,i9:()=>C});const n=1024;let i=0;const s=new WeakMap;class o{constructor({deserialize:t}={}){this.id=i++,this.deserialize=t||(()=>{throw new Error("This node type doesn't define a deserialize function")})}static string(){return new o({deserialize:t=>t})}static number(){return new o({deserialize:Number})}static flag(){return new o({deserialize:()=>!0})}set(t,e){return t[this.id]=e,t}add(t){return"function"!=typeof t&&(t=l.match(t)),e=>{let r=t(e);return void 0===r?null:[this,r]}}}o.closedBy=new o({deserialize:t=>t.split(" ")}),o.openedBy=new o({deserialize:t=>t.split(" ")}),o.group=new o({deserialize:t=>t.split(" ")});const a=Object.create(null);class l{constructor(t,e,r,n=0){this.name=t,this.props=e,this.id=r,this.flags=n}static define(t){let e=t.props&&t.props.length?Object.create(null):a,r=(t.top?1:0)|(t.skipped?2:0)|(t.error?4:0)|(null==t.name?8:0),n=new l(t.name||"",e,t.id,r);if(t.props)for(let r of t.props)Array.isArray(r)||(r=r(n)),r&&r[0].set(e,r[1]);return n}prop(t){return this.props[t.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(t){if("string"==typeof t){if(this.name==t)return!0;let e=this.prop(o.group);return!!e&&e.indexOf(t)>-1}return this.id==t}static match(t){let e=Object.create(null);for(let r in t)for(let n of r.split(" "))e[n]=t[r];return t=>{for(let r=t.prop(o.group),n=-1;n<(r?r.length:0);n++){let i=e[n<0?t.name:r[n]];if(i)return i}}}}l.none=new l("",Object.create(null),0,8);class h{constructor(t){this.types=t;for(let e=0;e<t.length;e++)if(t[e].id!=e)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...t){let e=[];for(let r of this.types){let n=null;for(let e of t){let t=e(r);t&&(n||(n=Object.assign({},r.props)),t[0].set(n,t[1]))}e.push(n?new l(r.name,n,r.id,r.flags):r)}return new h(e)}}class c{constructor(t,e,r,n){this.type=t,this.children=e,this.positions=r,this.length=n}toString(){let t=this.children.map((t=>t.toString())).join();return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(t,e=0){let r=null!=t&&s.get(this)||this.topNode,n=new y(r);return null!=t&&(n.moveTo(t,e),s.set(this,n._tree)),n}fullCursor(){return new y(this.topNode,!0)}get topNode(){return new d(this,0,0,null)}resolve(t,e=0){return this.cursor(t,e).node}iterate(t){let{enter:e,leave:r,from:n=0,to:i=this.length}=t;for(let t=this.cursor();;){let s=!1;if(t.from<=i&&t.to>=n&&(t.type.isAnonymous||!1!==e(t.type,t.from,t.to))){if(t.firstChild())continue;t.type.isAnonymous||(s=!0)}for(;s&&r&&r(t.type,t.from,t.to),s=t.type.isAnonymous,!t.nextSibling();){if(!t.parent())return;s=!0}}}balance(t=n){return this.children.length<=k?this:x(this.type,l.none,this.children,this.positions,0,this.children.length,0,t,this.length,0)}static build(t){return function(t){var e;let{buffer:r,nodeSet:i,topID:s=0,maxBufferLength:o=n,reused:a=[],minRepeatType:h=i.types.length}=t,d=Array.isArray(r)?new v(r,r.length):r,p=i.types,m=0;function g(t,e,r,n,s){let{id:v,start:w,end:C,size:S}=d,A=w-t;if(S<0)return-1==S?(r.push(a[v]),n.push(A)):m=v,void d.next();let M,T,D=p[v];if(C-w<=o&&(T=y(d.pos-e,s))){let e=new Uint16Array(T.size-T.skip),r=d.pos-T.size,n=e.length;for(;d.pos>r;)n=b(T.start,e,n,s);M=new f(e,C-T.start,i,s<0?l.none:p[s]),A=T.start-t}else{let t=d.pos-S;d.next();let e=[],r=[],n=v>=h?v:-1;for(;d.pos>t;)d.id==n?d.next():g(w,t,e,r,n);e.reverse(),r.reverse(),M=n>-1&&e.length>k?x(D,D,e,r,0,e.length,0,o,C-w,m):u(new c(D,e,r,C-w),m)}r.push(M),n.push(A)}function y(t,e){let r=d.fork(),n=0,i=0,s=0,a=r.end-o,l={size:0,start:0,skip:0};t:for(let o=r.pos-t;r.pos>o;){if(r.id==e){l.size=n,l.start=i,l.skip=s,s+=4,n+=4,r.next();continue}let t=r.size,c=r.pos-t;if(t<0||c<o||r.start<a)break;let u=r.id>=h?4:0,f=r.start;for(r.next();r.pos>c;){if(r.size<0)break t;r.id>=h&&(u+=4),r.next()}i=f,n+=t,s+=u}return(e<0||n==t)&&(l.size=n,l.start=i,l.skip=s),l.size>4?l:void 0}function b(t,e,r,n){let{id:i,start:s,end:o,size:a}=d;if(d.next(),i==n)return r;let l=r;if(a>4){let i=d.pos-(a-4);for(;d.pos>i;)r=b(t,e,r,n)}return i<h&&(e[--r]=l,e[--r]=o-t,e[--r]=s-t,e[--r]=i),r}let w=[],C=[];for(;d.pos>0;)g(t.start||0,0,w,C,-1);let S=null!==(e=t.length)&&void 0!==e?e:w.length?C[0]+w[0].length:0;return new c(p[s],w.reverse(),C.reverse(),S)}(t)}}function u(t,e){return e&&(t.contextHash=e),t}c.empty=new c(l.none,[],[],0);class f{constructor(t,e,r,n=l.none){this.buffer=t,this.length=e,this.set=r,this.type=n}toString(){let t=[];for(let e=0;e<this.buffer.length;)t.push(this.childString(e)),e=this.buffer[e+3];return t.join(",")}childString(t){let e=this.buffer[t],r=this.buffer[t+3],n=this.set.types[e],i=n.name;if(/\W/.test(i)&&!n.isError&&(i=JSON.stringify(i)),r==(t+=4))return i;let s=[];for(;t<r;)s.push(this.childString(t)),t=this.buffer[t+3];return i+"("+s.join(",")+")"}findChild(t,e,r,n){let{buffer:i}=this,s=-1;for(let o=t;o!=e;o=i[o+3])if(-1e8!=n){let t=i[o+1],e=i[o+2];if(r>0){if(e>n&&(s=o),e>n)break}else if(t<n&&(s=o),e>=n)break}else if(s=o,r>0)break;return s}}class d{constructor(t,e,r,n){this.node=t,this.from=e,this.index=r,this._parent=n}get type(){return this.node.type}get name(){return this.node.type.name}get to(){return this.from+this.node.length}nextChild(t,e,r,n=!1){for(let i=this;;){for(let{children:s,positions:o}=i.node,a=e>0?s.length:-1;t!=a;t+=e){let a=s[t],l=o[t]+i.from;if(-1e8==r||!(e<0?l>=r:l+a.length<=r))if(a instanceof f){let n=a.findChild(0,a.buffer.length,e,-1e8==r?-1e8:r-l);if(n>-1)return new g(new m(i,a,t,l),null,n)}else if(n||!a.type.isAnonymous||b(a)){let s=new d(a,l,t,i);return n||!s.type.isAnonymous?s:s.nextChild(e<0?a.children.length-1:0,e,r)}}if(n||!i.type.isAnonymous)return null;if(t=i.index+e,i=i._parent,!i)return null}}get firstChild(){return this.nextChild(0,1,-1e8)}get lastChild(){return this.nextChild(this.node.children.length-1,-1,-1e8)}childAfter(t){return this.nextChild(0,1,t)}childBefore(t){return this.nextChild(this.node.children.length-1,-1,t)}nextSignificantParent(){let t=this;for(;t.type.isAnonymous&&t._parent;)t=t._parent;return t}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent?this._parent.nextChild(this.index+1,1,-1):null}get prevSibling(){return this._parent?this._parent.nextChild(this.index-1,-1,-1):null}get cursor(){return new y(this)}resolve(t,e=0){return this.cursor.moveTo(t,e).node}getChild(t,e=null,r=null){let n=p(this,t,e,r);return n.length?n[0]:null}getChildren(t,e=null,r=null){return p(this,t,e,r)}toString(){return this.node.toString()}}function p(t,e,r,n){let i=t.cursor,s=[];if(!i.firstChild())return s;if(null!=r)for(;!i.type.is(r);)if(!i.nextSibling())return s;for(;;){if(null!=n&&i.type.is(n))return s;if(i.type.is(e)&&s.push(i.node),!i.nextSibling())return null==n?s:[]}}class m{constructor(t,e,r,n){this.parent=t,this.buffer=e,this.index=r,this.start=n}}class g{constructor(t,e,r){this.context=t,this._parent=e,this.index=r,this.type=t.buffer.set.types[t.buffer.buffer[r]]}get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}child(t,e){let{buffer:r}=this.context,n=r.findChild(this.index+4,r.buffer[this.index+3],t,-1e8==e?-1e8:e-this.context.start);return n<0?null:new g(this.context,this,n)}get firstChild(){return this.child(1,-1e8)}get lastChild(){return this.child(-1,-1e8)}childAfter(t){return this.child(1,t)}childBefore(t){return this.child(-1,t)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(t){return this._parent?null:this.context.parent.nextChild(this.context.index+t,t,-1)}get nextSibling(){let{buffer:t}=this.context,e=t.buffer[this.index+3];return e<(this._parent?t.buffer[this._parent.index+3]:t.buffer.length)?new g(this.context,this._parent,e):this.externalSibling(1)}get prevSibling(){let{buffer:t}=this.context,e=this._parent?this._parent.index+4:0;return this.index==e?this.externalSibling(-1):new g(this.context,this._parent,t.findChild(e,this.index,-1,-1e8))}get cursor(){return new y(this)}resolve(t,e=0){return this.cursor.moveTo(t,e).node}toString(){return this.context.buffer.childString(this.index)}getChild(t,e=null,r=null){let n=p(this,t,e,r);return n.length?n[0]:null}getChildren(t,e=null,r=null){return p(this,t,e,r)}}class y{constructor(t,e=!1){if(this.full=e,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,t instanceof d)this.yieldNode(t);else{this._tree=t.context.parent,this.buffer=t.context;for(let e=t._parent;e;e=e._parent)this.stack.unshift(e.index);this.bufferNode=t,this.yieldBuf(t.index)}}get name(){return this.type.name}yieldNode(t){return!!t&&(this._tree=t,this.type=t.type,this.from=t.from,this.to=t.to,!0)}yieldBuf(t,e){this.index=t;let{start:r,buffer:n}=this.buffer;return this.type=e||n.set.types[n.buffer[t]],this.from=r+n.buffer[t+1],this.to=r+n.buffer[t+2],!0}yield(t){return!!t&&(t instanceof d?(this.buffer=null,this.yieldNode(t)):(this.buffer=t.context,this.yieldBuf(t.index,t.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enter(t,e){if(!this.buffer)return this.yield(this._tree.nextChild(t<0?this._tree.node.children.length-1:0,t,e,this.full));let{buffer:r}=this.buffer,n=r.findChild(this.index+4,r.buffer[this.index+3],t,-1e8==e?-1e8:e-this.buffer.start);return!(n<0)&&(this.stack.push(this.index),this.yieldBuf(n))}firstChild(){return this.enter(1,-1e8)}lastChild(){return this.enter(-1,-1e8)}childAfter(t){return this.enter(1,t)}childBefore(t){return this.enter(-1,t)}parent(){if(!this.buffer)return this.yieldNode(this.full?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let t=this.full?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(t)}sibling(t){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree._parent.nextChild(this._tree.index+t,t,-1e8,this.full));let{buffer:e}=this.buffer,r=this.stack.length-1;if(t<0){let t=r<0?0:this.stack[r]+4;if(this.index!=t)return this.yieldBuf(e.findChild(t,this.index,-1,-1e8))}else{let t=e.buffer[this.index+3];if(t<(r<0?e.buffer.length:e.buffer[this.stack[r]+3]))return this.yieldBuf(t)}return r<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+t,t,-1e8,this.full))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(t){let e,r,{buffer:n}=this;if(n){if(t>0){if(this.index<n.buffer.buffer.length)return!1}else for(let t=0;t<this.index;t++)if(n.buffer.buffer[t+3]<this.index)return!1;({index:e,parent:r}=n)}else({index:e,_parent:r}=this._tree);for(;r;({index:e,_parent:r}=r))for(let n=e+t,i=t<0?-1:r.node.children.length;n!=i;n+=t){let t=r.node.children[n];if(this.full||!t.type.isAnonymous||t instanceof f||b(t))return!1}return!0}move(t){if(this.enter(t,-1e8))return!0;for(;;){if(this.sibling(t))return!0;if(this.atLastNode(t)||!this.parent())return!1}}next(){return this.move(1)}prev(){return this.move(-1)}moveTo(t,e=0){for(;(this.from==this.to||(e<1?this.from>=t:this.from>t)||(e>-1?this.to<=t:this.to<t))&&this.parent(););for(;e<0?this.childBefore(t):this.childAfter(t);)if(this.from==this.to||(e<1?this.from>=t:this.from>t)||(e>-1?this.to<=t:this.to<t)){this.parent();break}return this}get node(){if(!this.buffer)return this._tree;let t=this.bufferNode,e=null,r=0;if(t&&t.context==this.buffer)t:for(let n=this.index,i=this.stack.length;i>=0;){for(let s=t;s;s=s._parent)if(s.index==n){if(n==this.index)return s;e=s,r=i+1;break t}n=this.stack[--i]}for(let t=r;t<this.stack.length;t++)e=new g(this.buffer,e,this.stack[t]);return this.bufferNode=new g(this.buffer,e,this.index)}get tree(){return this.buffer?null:this._tree.node}}function b(t){return t.children.some((t=>!t.type.isAnonymous||t instanceof f||b(t)))}class v{constructor(t,e){this.buffer=t,this.index=e}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new v(this.buffer,this.index)}}const k=8;function x(t,e,r,n,i,s,o,a,h,f){let d=[],p=[];if(h<=a)for(let t=i;t<s;t++)d.push(r[t]),p.push(n[t]-o);else{let t=Math.max(a,Math.ceil(1.5*h/k));for(let h=i;h<s;){let i=h,m=n[h];for(h++;h<s;h++){if(n[h]+r[h].length-m>t)break}if(h==i+1){let n=r[i];if(n instanceof c&&n.type==e&&n.length>t<<1){for(let t=0;t<n.children.length;t++)d.push(n.children[t]),p.push(n.positions[t]+m-o);continue}d.push(n)}else if(h==i+1)d.push(r[i]);else{let t=x(e,e,r,n,i,h,m,a,n[h-1]+r[h-1].length-m,f);e==l.none||w(t.children,e)||(t=u(new c(l.none,t.children,t.positions,t.length),f)),d.push(t)}p.push(m-o)}}return u(new c(t,d,p,h),f)}function w(t,e){for(let r of t)if(r.type==e)return!0;return!1}class C{constructor(t,e,r,n,i){this.from=t,this.to=e,this.tree=r,this.offset=n,this.open=i}get openStart(){return(1&this.open)>0}get openEnd(){return(2&this.open)>0}static applyChanges(t,e,r=128){if(!e.length)return t;let n=[],i=1,s=t.length?t[0]:null,o=0,a=0,l=0;for(;;){let h=o<e.length?e[o++]:null,c=h?h.fromA:1e9;if(c-a>=r)for(;s&&s.from<c;){let e=s;if(a>=e.from||c<=e.to||l){let t=Math.max(e.from,a)-l,r=Math.min(e.to,c)-l;e=t>=r?null:new C(t,r,e.tree,e.offset+l,(o>0?1:0)|(h?2:0))}if(e&&n.push(e),s.to>c)break;s=i<t.length?t[i++]:null}if(!h)break;a=h.toA,l=h.toA-h.toB}return n}static addTree(t,e=[],r=!1){let n=[new C(0,t.length,t,0,r?2:0)];for(let r of e)r.to>t.length&&n.push(r);return n}}}}]);
//# sourceMappingURL=2c759b4e.js.map